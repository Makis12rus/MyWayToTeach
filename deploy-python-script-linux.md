# üöÄ –î–µ–ø–ª–æ–π Python-—Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä Linux –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤

–≠—Ç–æ—Ç –≥–∞–π–¥ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø–æ—à–∞–≥–æ–≤–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å Python-–±–æ—Ç–∞ (–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Å–∫—Ä–∏–ø—Ç) –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º Linux. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–∞–∂–µ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç.

---

## üìÅ 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 1.1 –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –Ω–µ—ë

```bash
mkdir mybot && cd mybot
```

---

### 1.2 –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É

```bash
sudo apt update && sudo apt upgrade -y
```
> –ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è —Ç–∞–∫–æ–π —ç–∫—Ä–∞–Ω
> 
![–ó–¥–µ—Å—å –Ω–∞—Å –ø—Ä–æ—Å—è—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Docker](images/1gv93jds3231.png)

> üí° –ó–¥–µ—Å—å –Ω–∞—Å –ø—Ä–æ—Å—è—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Docker.

‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã–±—Ä–∞—Ç—å "Yes" (–î–∞) , –µ—Å–ª–∏:
- –£ –≤–∞—Å –Ω–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ —Å–µ—Ä–≤–∏—Å–∞ –∏–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (restart policy).
- –í—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º Docker –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –¥–µ–º–æ–Ω–∞ (–∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ https://launchpad.net/bugs/1658691 ).

> –ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è —Ç–∞–∫–æ–π —ç–∫—Ä–∞–Ω
> 
![–≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–æ–≤–æ–≥–æ —è–¥—Ä–∞ (kernel) –≤ Linux](images/ndgjk89f923h.png)
> üí° –≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–æ–≤–æ–≥–æ —è–¥—Ä–∞ (kernel) –≤ Linux.

‚úÖ –°–º–µ–ª–æ –∂–º–µ–º 'ENTER'

> –ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è —Ç–∞–∫–æ–π —ç–∫—Ä–∞–Ω
> 
![–û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏](images/g9fg490.png)
> üí° –≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–∞—Ö Linux (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ Debian/Ubuntu) –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ apt upgrade).

‚úÖ –° –ø–æ–º–æ—â—å—é 'TAB' –ø–µ—Ä–µ—Å–∫–∞–∫–∏–µ–≤–∞–µ–º –Ω–∞ 'OK' –∏ –∂–º–µ–º 'ENTER'

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω–∞–¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
```bash
sudo reboot
```

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—Ö–æ–¥–∏–º –æ–±—Ä–∞—Ç–Ω–æ –≤ –Ω–∞—à—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±–æ—Ç–∞

```bash
cd mybot
```



---

### 1.3 –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Python –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

```bash
sudo apt install python3 python3-pip python3-venv -y
```

---

## üêç 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 2.1 –°–æ–∑–¥–∞—ë–º –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
python3 -m venv venv
source venv/bin/activate
```

> ‚úÖ –ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –Ω–∞—á–Ω—ë—Ç—Å—è —Å `(venv)`

---

### 2.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å `requirements.txt`:

```bash
pip install -r requirements.txt
```

–ò–ª–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é:

```bash
pip install requests
pip install flask
```

---

### 2.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –≤—Ä—É—á–Ω—É—é

```bash
python main.py
```

> üîç –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

## ‚öôÔ∏è 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd-—Å–µ—Ä–≤–∏—Å–∞

### 3.1 –°–æ–∑–¥–∞—ë–º unit-—Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞

```bash
sudo nano /etc/systemd/system/mybot.service
```

–í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª:

```ini
[Unit]
Description=MyBot Service
After=network.target

[Service]
ExecStart=/root/MyBot/venv/bin/python /root/MyBot/main.py
WorkingDirectory=/root/MyBot/
Restart=always
Environment="PYTHONUNBUFFERED=1"
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
```

> üõ° –ó–∞–º–µ–Ω–∏—Ç–µ `<–≤–∞—à_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å>` –Ω–∞ –∏–º—è –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ root!

---

### 3.2 –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞

```bash
sudo systemctl daemon-reload
sudo systemctl enable mybot.service
sudo systemctl start mybot.service
```

---

### 3.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
sudo systemctl status mybot.service
```

> ‚úÖ –í —Å—Ç–∞—Ç—É—Å–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `active (running)`

---

## üîß 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

| –ö–æ–º–∞–Ω–¥–∞                                   | –û–ø–∏—Å–∞–Ω–∏–µ                     |
|------------------------------------------|------------------------------|
| `sudo systemctl start mybot.service`     | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å            |
| `sudo systemctl stop mybot.service`      | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å           |
| `sudo systemctl restart mybot.service`   | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å               |
| `sudo systemctl status mybot.service`    | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å            |
| `sudo systemctl enable mybot.service`    | –î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É     |
| `sudo systemctl disable mybot.service`   | –£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏     |
| `sudo journalctl -u mybot.service -f`    | –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ |

---

## ‚è± 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd-—Ç–∞–π–º–µ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 5.1 –°–æ–∑–¥–∞—ë–º —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

```bash
sudo nano /etc/systemd/system/mybot-restart.service
```

–í—Å—Ç–∞–≤—å—Ç–µ:

```ini
[Unit]
Description=One-shot Restart of mybot.service

[Service]
Type=oneshot
ExecStart=/usr/bin/systemctl try-restart mybot.service
```

---

### 5.2 –°–æ–∑–¥–∞—ë–º —Ç–∞–π–º–µ—Ä

```bash
sudo nano /etc/systemd/system/mybot-restart.timer
```

–í—Å—Ç–∞–≤—å—Ç–µ:

```ini
[Unit]
Description=Daily restart for mybot.service

[Timer]
OnCalendar=daily
Persistent=true

[Install]
WantedBy=timers.target
```

---

### 5.3 –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ç–∞–π–º–µ—Ä–∞

```bash
sudo systemctl daemon-reload
sudo systemctl enable mybot-restart.timer
sudo systemctl start mybot-restart.timer
```

> üïì –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–π–º–µ—Ä–æ–≤:  
```bash
systemctl list-timers
```

---

## üîê 6. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- **–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å –æ—Ç root!**  
  –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ –ø–∞—Ä–æ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `mybotuser`).
  
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**  
  ```bash
  sudo chown -R myuser:myuser ~/mybot
  ```

- **–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –≤ journal –∏–ª–∏ –≤ —Ñ–∞–π–ª:**  
  –í `mybot.service` –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å:  
  ```ini
  StandardOutput=append:/var/log/mybot.log
  ```

- **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**  
  ```bash
  sudo systemctl status mybot.service
  sudo journalctl -u mybot.service --since today
  ```

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –≤–∞—à –±–æ—Ç:

- –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏;
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã;
- –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–±–æ—è—Ö;
- –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

–í—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —Å –ø–æ–º–æ—â—å—é `systemctl` –∏ `journalctl`.

---
